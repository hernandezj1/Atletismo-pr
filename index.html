<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>R√©cords de Atletismo de Puerto Rico</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background: linear-gradient(135deg, #e0f2fe 0%, #b3e5fc 100%);
            min-height: 100vh;
        }
    </style>
</head>
<body class="font-sans">
    <div class="container mx-auto px-4 py-8 max-w-6xl">
        <!-- Encabezado -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-blue-900 mb-4">R√©cords de Atletismo de Puerto Rico üáµüá∑</h1>
            
            <!-- P√°rrafo de introducci√≥n -->
            <div class="bg-white rounded-lg shadow-md p-6 mb-8 max-w-4xl mx-auto">
                <div id="intro-display" class="text-gray-700 leading-relaxed text-lg">
                        Esta no es una base de datos oficial. Fue compilada por m√≠, Jos√© Hern√°ndez, 
    entrenador en Cupey Track y entrenador de lanzamientos Nivel II certificado por USATF. 
    Utilizamos recursos desarrollados por Pedro An√≠bal D√≠az, a quien damos cr√©dito por su 
    trabajo que nos permite mantener y actualizar estos r√©cords en la actualidad. 
    Nuestro objetivo es continuar su legado m√°s all√° de la temporada 2023
                </div>
            </div>
        </div>

        <!-- Controles -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-8">
            <div class="grid md:grid-cols-2 gap-6">
                <!-- Selecci√≥n de g√©nero -->
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-3">Categor√≠a</label>
                    <select id="gender-select" class="w-full p-3 border border-gray-300 rounded-lg bg-white text-gray-700 font-medium">
                        <option value="male">R√©cords Masculinos</option>
                        <option value="female">R√©cords Femeninos</option>
                    </select>
                </div>

                <!-- Selecci√≥n de evento -->
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-3">Evento</label>
                    <select id="event-select" class="w-full p-3 border border-gray-300 rounded-lg bg-white text-gray-700 font-medium">
                        <optgroup label="Velocidad">
                            <option value="100m">100m</option>
                            <option value="200m">200m</option>
                            <option value="400m">400m</option>
                        </optgroup>
                        <optgroup label="Medio Fondo">
                            <option value="800m">800m</option>
                            <option value="1500m">1500m</option>
                            <option value="Mile">Milla</option>
                        </optgroup>
                        <optgroup label="Fondo">
                            <option value="3000m">3000m</option>
                            <option value="5000m">5000m</option>
                            <option value="10000m">10000m</option>
                            <option value="Marathon">Marat√≥n</option>
                        </optgroup>
                        <optgroup label="Vallas">
                            <option value="110mH">110m Vallas</option>
                            <option value="400mH">400m Vallas</option>
                            <option value="3000mSC">3000m Obst√°culos</option>
                        </optgroup>
                        <optgroup label="Saltos">
                            <option value="HJ">Salto de Altura</option>
                            <option value="PV">Salto con P√©rtiga</option>
                            <option value="LJ">Salto de Longitud</option>
                            <option value="TJ">Salto Triple</option>
                        </optgroup>
                        <optgroup label="Lanzamientos">
                            <option value="SP">Lanzamiento de Bala</option>
                            <option value="DT">Lanzamiento de Disco</option>
                            <option value="HT">Lanzamiento de Martillo</option>
                            <option value="JT">Lanzamiento de Jabalina</option>
                        </optgroup>
                        <optgroup label="Pruebas Combinadas">
                            <option value="Decathlon">Decatl√≥n</option>
                            <option value="Heptathlon">Heptatl√≥n</option>
                        </optgroup>
                    </select>
                </div>
            </div>
        </div>

        <!-- Tabla de R√©cords -->
        <div class="bg-white rounded-lg shadow-md overflow-hidden">
            <div class="bg-blue-600 text-white p-4">
                <h2 id="table-title" class="text-xl font-bold">Top 10 - Masculino 100m</h2>
            </div>
            
            <div id="loading" class="p-8 text-center text-gray-600">
                <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mb-4"></div>
                <p>Cargando r√©cords desde Google Sheets...</p>
            </div>

            <div id="records-container" class="hidden">
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead class="bg-gray-50">
                            <tr id="table-headers"></tr>
                        </thead>
                        <tbody id="records-tbody" class="divide-y divide-gray-200"></tbody>
                    </table>
                </div>
            </div>

            <div id="error-message" class="hidden p-8 text-center text-red-600">
                <p class="font-medium">No se pudieron cargar los r√©cords en este momento.</p>
                <p class="text-sm mt-2">Verifica tu conexi√≥n a internet e intenta nuevamente.</p>
            </div>
        </div>

        <!-- Pie de p√°gina -->
        <div class="text-center mt-8 text-gray-600">
            <p class="text-sm">Datos provenientes de r√©cords oficiales de Atletismo de Puerto Rico</p>
        </div>
    </div>

    <script>
        const genderSelect = document.getElementById('gender-select');
        const eventSelect = document.getElementById('event-select');
        const tableTitle = document.getElementById('table-title');
        const tableHeaders = document.getElementById('table-headers');
        const recordsTbody = document.getElementById('records-tbody');
        const loadingDiv = document.getElementById('loading');
        const recordsContainer = document.getElementById('records-container');
        const errorMessage = document.getElementById('error-message');

        const SHEETS = {
            male: "https://docs.google.com/spreadsheets/d/1RX0naMDsW9KWmqECB2Tfu1W9PMZfNGk5Wo9fdnqF0ss/gviz/tq?tqx=out:json&sheet=",
            female: "https://docs.google.com/spreadsheets/d/1Qxa6GV7D1orwNdHuYUjGpEAyWm9OPU0UFxYoWmrAPhs/gviz/tq?tqx=out:json&sheet="
        };

        async function loadRecords(gender, event) {
            try {
                const url = SHEETS[gender] + encodeURIComponent(event);
                const res = await fetch(url);
                const text = await res.text();
                const json = JSON.parse(text.substr(47).slice(0, -2));

                tableHeaders.innerHTML = "";
                recordsTbody.innerHTML = "";

                const headers = ["Ranking", "Marca", "Atleta", "Fecha de Nacimiento", "Lugar", "Fecha"];
                headers.forEach(header => {
                    const th = document.createElement("th");
                    th.className = "px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider";
                    th.textContent = header;
                    tableHeaders.appendChild(th);
                });

                json.table.rows.forEach((row, index) => {
                    const tr = document.createElement("tr");
                    tr.className = index % 2 === 0 ? "bg-white" : "bg-gray-50";
                    row.c.forEach((cell, cellIndex) => {
                        const td = document.createElement("td");
                        td.className = "px-6 py-4 whitespace-nowrap text-sm text-gray-900";
                        if (cellIndex === 0) td.classList.add("font-medium");
                        td.textContent = cell ? cell.v : "";
                        tr.appendChild(td);
                    });
                    recordsTbody.appendChild(tr);
                });

                loadingDiv.classList.add("hidden");
                recordsContainer.classList.remove("hidden");
            } catch (error) {
                loadingDiv.classList.add("hidden");
                errorMessage.classList.remove("hidden");
            }
        }

        function updateTable() {
            const gender = genderSelect.value;
            const event = eventSelect.value;
            const genderText = gender === "male" ? "Masculino" : "Femenino";

            tableTitle.textContent = `Top 10 - ${genderText} ${event}`;
            loadingDiv.classList.remove("hidden");
            recordsContainer.classList.add("hidden");
            errorMessage.classList.add("hidden");

            loadRecords(gender, event);
        }

        genderSelect.addEventListener("change", updateTable);
        eventSelect.addEventListener("change", updateTable);

        updateTable();
    </script>
</body>
</html>
